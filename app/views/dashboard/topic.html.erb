<section id="topicPage">
<div class="col-md-12">
	<div class="col-md-8 col-md-offset-2">
	<div class="col-md-12 boxBotaoVoltar">
		<%= link_to("< VOLTAR AS DÃšVIDAS" , dashboard_path, :class => "btn btn-default pull-right btn1") %>
	</div>
	<div class="col-md-12 padraoBox">
		<div class="col-md-12" style="padding: 0; padding-top: 15px; padding-bottom: 15px;">
			<div class="data pull-left col-md-3">
				<%= image_tag('ronaldo-default', :class => "img-circle img-responsive usuarioFotoTopic") %>
				<h3 class="usuarioInfo text-center"><%= @topic.user.nome %></h3>
				<div class="text-center col-md-10 col-md-offset-0">
					<%= @topic.status == 0 ? image_tag('aberto') : image_tag('finalizado') %>
					<% if (@topic.user_id == @user.id) %>
						<%= link_to("Editar", edit_topic_dashboard_path(@topic)) %> 
						<%= link_to("Fechar TÃ³pico", close_topic_path(@topic)) %> 
					<% end %>
				</div>
			</div>
			<div class="col-md-9">
				<h3 style="margin-bottom: 15px;"><%= @topic.titulo %></h3>
				<h4 style="margin-bottom: 25px;">
					<%= @topic.category.nome %>
					>
					<%= @topic.subcategory.nome %>	
				</h4>
				<p><%= @topic.descricao %></p>
				<p><%#= t.subcategory.nome %></p>
			</div>
		</div>

	</div>

	<!-- Caixa de Resposta -->
	<% if (@topic.status != 1) %>
	<div class="col-md-12 breakPaddingInput" id="answering" style="margin-top: 20px;">
		<%= simple_form_for @answer do |a| %>
			<%= a.input :descricao, as: :text, required: true, input_html: { class: "form-control col-md-9", style: "margin-bottom: 12px; background-color: #fff; height: 50px;" }, :label => false %>
			<%= a.input :user_id, as: :hidden, input_html: { value: @user.id } %>
			<%= a.input :topic_id, as: :hidden, input_html: { value: @topic.id } %>
			<%= a.button :submit, "RESPONDER", class: "btn btn-success col-md-4 pull-right botaoEnviarDuvida", :controller => "answers" %>
		<% end %>
	</div>
	<% end %>


	<!-- Respostas (Answers) -->
	<div id="answersTopic">
	<div class="col-md-12 resetPadding">
		<div class="answersTopic">
			<h3>Outras Respostas (<%= @answersCount %>):</h3>
		</div>
	</div>
	<% @answers.each do |a| %>
	<div class="col-md-12 padraoBox">
		<div class="col-md-12 boxAnswer" style="padding: 0; padding-top: 15px; padding-bottom: 15px;">
			<div class="data pull-left col-md-2">
				<%= image_tag('ronaldo-default', :class => "img-circle img-responsive usuarioFotoTopic") %>
			</div>
			<div class="col-md-10">
				<div class="pull-right">
					<%= link_to image_tag('x', :class => "img-responsive"), {:controller => :answers, :action => :destroy, :id => a.id}, :method => :delete, data: {confirm: 'Ctz?'}, 'data-toggle': 'tooltip', 'data-placement':'top', title: 'Excluir Resposta' %>
				</div>
				<h4><%= a.user.nome %></h4>
				<p><%= a.descricao %></p>
				<div class="acoes pull-right">
					<%= image_tag('vote-sim') %>
					<%= image_tag('vote-nao') %>
					<%= link_to image_tag('responder'), {:remote => true}, :onclick => "responderResposta(" + a.id.to_s + ")", :class => "responder", 'data-toggle': 'tooltip', 'data-placement':'top', title: 'Responder'  %>
				</div>
				<p><%#= t.subcategory.nome %></p>
			</div>
		</div>
	</div>

	<% @answersChild.each do |aC| %>
		<% if (a.id == aC.answer_id) %>
			<div class="col-md-10 padraoBoxInverse pull-right">
				<div class="col-md-12 boxAnswer" style="padding: 0; padding-top: 15px; padding-bottom: 15px;">
					<div class="data pull-left col-md-2">
						<%= image_tag('ronaldo-default', :class => "img-circle img-responsive usuarioFotoTopic") %>
					</div>
					<div class="col-md-10">
						<div class="pull-right">
							<%= link_to image_tag('x', :class => "img-responsive"), {:controller => :answers, :action => :destroy, :id => aC.id}, :method => :delete, data: {confirm: 'Ctz?'}, 'data-toggle': 'tooltip', 'data-placement':'top', title: 'Excluir Resposta' %>
						</div>
						<h4><%= aC.user.nome %></h4>
						<p><%= aC.descricao %></p>
						<div class="acoes pull-right">
							<%= image_tag('vote-sim') %>
							<%= image_tag('vote-nao') %>
							<%= link_to image_tag('responder'), {:remote => true}, :onclick => "responderResposta(" + aC.id.to_s + ")", :class => "responder", 'data-toggle': 'tooltip', 'data-placement':'top', title: 'Responder'  %>
						</div>
						<p><%#= t.subcategory.nome %></p>
					</div>
				</div>
			</div>
		<% end %>
	<% end %>

	<div class="col-md-9 padraoBox pull-right caixaResposta" style="display: none;" id="caixaDeResposta_<%= a.id %>">
		<div class="col-md-12 boxAnswer" style="padding: 0; padding-top: 15px; padding-bottom: 15px;">
			<div class="col-md-12">
				<%= simple_form_for @answer do |an| %>
					<%= an.input :descricao, as: :text, required: true, input_html: { class: "form-control col-md-9", style: "margin-bottom: 12px;" }, :label => false %>
					<%= an.input :user_id, as: :hidden, input_html: { value: @user.id } %>
					<%= an.input :topic_id, as: :hidden, input_html: { value: nil } %>
					<%= an.input :answer_id, as: :hidden, input_html: { value: a.id } %>
					<%= an.button :submit, "RESPONDER", class: "btn btn-success botaoEnviarDuvida", :controller => "answers" %>
				<% end %>
			</div>
		</div>	
	</div>

	<!-- teste -->
	

	<% end %>
		
	</div>
	</div>
</div>
</div>
</section>


